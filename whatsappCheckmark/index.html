<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Convert raw text to a checklist poll in whatsapp web</title>
        <style>
            * {
                font-weight: normal;
                color: #f4f6f8;
                background: #202124;
            }
            #a:link,
            #a:visited {
                background-color: inherit;
                color: white;
                border: 2px solid #4c56af;
                padding: 10px 20px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
            }

            #a:hover,
            #a:active {
                background-color: #4c56af;
                color: white;
            }
        </style>
    </head>
    <body>
        <h1>How to convert raw text to a checklist poll in whatsapp web!</h1>
        <h3>hold the button, drag and drop it to bookmarks</h3>
        <a href="javascript:(async()=>{async function s(e){e.focus();e.dispatchEvent(new KeyboardEvent('keydown',{key:'Control',code:'ControlLeft',ctrlKey:true,bubbles:true}));e.dispatchEvent(new KeyboardEvent('keydown',{key:'a',code:'KeyA',ctrlKey:true,bubbles:true}));e.dispatchEvent(new KeyboardEvent('keyup',{key:'a',code:'KeyA',ctrlKey:true,bubbles:true}));e.dispatchEvent(new KeyboardEvent('keyup',{key:'Control',code:'ControlLeft',bubbles:true}));await new Promise(r=>setTimeout(r,100));e.dispatchEvent(new KeyboardEvent('keydown',{key:'Delete',code:'Delete',bubbles:true}));e.dispatchEvent(new KeyboardEvent('keypress',{key:'Delete',code:'Delete',bubbles:true}));e.dispatchEvent(new KeyboardEvent('keyup',{key:'Delete',code:'Delete',bubbles:true}));e.dispatchEvent(new InputEvent('input',{bubbles:true}))}async function t(e,t,d=50){e.focus();await new Promise(r=>setTimeout(r,d));document.execCommand('insertText',false,t);await new Promise(r=>setTimeout(r,d));e.dispatchEvent(new InputEvent('input',{bubbles:true}))}function c(a,s=12){let r=[];for(let i=0;i<a.length;i+=s)r.push(a.slice(i,i+s));return r}async function sub(d){document.querySelector('span[data-icon=%22send%22]').click();await new Promise(r=>setTimeout(r,d))}async function n(d){document.querySelector('span[data-icon=%22plus%22]').click();await new Promise(r=>setTimeout(r,d));const x='//span[text()=%22Poll%22]';const p=document.evaluate(x,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;p.click();await new Promise(r=>setTimeout(r,d))}const e=document.querySelectorAll('[contenteditable=true]')[1];const str=e.innerText;await s(e);const tasks=c(str.split('\\n').map(x=>x.trim()).filter(x=>x!=''));const delay=2000;for(let j=0;j<tasks.length;j++){await n(delay);const q=document.querySelectorAll('[contenteditable=true]')[0];await t(q,`${j+1}/${tasks.length}`);const m=document.querySelectorAll('[contenteditable=true]')[1].parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;for(let i=0;i<tasks[j].length;i++){const el=m.childNodes[i].querySelector('[contenteditable=true]');await t(el,tasks[j][i])}await sub(delay)}})();"
           >Whatsapp Checklist Converter</a>
        <h3>Download src <a href="./code.js">here</a></h3>
    </body>
</html>
